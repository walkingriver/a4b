<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>07-Custom Angular Checkbox with ngModel</title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<h1 id="custom-angular-checkbox-with-ngmodel-support">Custom Angular
Checkbox with [(ngModel)] Support</h1>
<p>Recently I needed to add some custom styles to a checkbox in an
Angular app. I found a simple example of what I wanted to do,
implemented entirely with CSS and HTML, and containing no imperative
code. Delighted with this discovery, I copied the CSS into my page and
got it working with a few tweaks. Then I wondered what it would take to
turn it into a custom component I could reuse. As it turns out, it was
harder than I thought, but not overwhelming. The solution is described
here.</p>
<h2 id="custom-styled-checkbox">Custom-Styled Checkbox</h2>
<p>The UI design I was trying to copy required a custom-styled checkbox.
This one needed a fat white check mark inside a green box when checked,
and an empty gray square when unchecked. Further, the design called for
the checkbox control itself to be larger than normal and had a specific
requirement for the label’s spacing.</p>
<h2 id="css">CSS</h2>
<p>I will start by showing the final CSS in case you want to follow
along, but I will not be describing the styles. The point of this post
is to show the Angular component. If you want a more complete
explanation of the styling, this is where I got the HTML and CSS I used.
<a href="https://www.w3schools.com">Link: W3School</a>
(https://www.w3schools.com). I tweaked their CSS a bit, but not by
much.</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode css"><code class="sourceCode css"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="in">:host</span> {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">display</span>: <span class="dv">block</span><span class="op">;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* The container */</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">.cb-container</span> {</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">display</span>: <span class="dv">inline-block</span><span class="op">;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">position</span>: <span class="dv">relative</span><span class="op">;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">padding-left</span>: <span class="dv">30</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">margin-bottom</span>: <span class="dv">12</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">cursor</span>: <span class="dv">pointer</span><span class="op">;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">-webkit-user-select</span>: <span class="dv">none</span><span class="op">;</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">-moz-user-select</span>: <span class="dv">none</span><span class="op">;</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">-ms-user-select</span>: <span class="dv">none</span><span class="op">;</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">user-select</span>: <span class="dv">none</span><span class="op">;</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">line-height</span>: <span class="dv">22</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* Hide the browser&#39;s default checkbox */</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">.cb-container</span> input {</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">position</span>: <span class="dv">absolute</span><span class="op">;</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">opacity</span>: <span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">cursor</span>: <span class="dv">pointer</span><span class="op">;</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">height</span>: <span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">width</span>: <span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* Create a custom checkbox */</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">.checkmark</span> {</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>    <span class="kw">position</span>: <span class="dv">absolute</span><span class="op">;</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">top</span>: <span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>    <span class="kw">left</span>: <span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>    <span class="kw">height</span>: <span class="dv">20</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>    <span class="kw">width</span>: <span class="dv">20</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    <span class="kw">background-color</span>: <span class="cn">#ffffff</span><span class="op">;</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    <span class="kw">border</span>: <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#00aa00</span><span class="op">;</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    <span class="kw">border-radius</span>: <span class="dv">2</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* On mouse-over, add a grey background color */</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">.cb-container</span><span class="in">:hover</span> input <span class="op">~</span> <span class="fu">.checkmark</span> {</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>    <span class="kw">background-color</span>: <span class="cn">#ffffff</span><span class="op">;</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* When the checkbox is checked, add a green background */</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">.cb-container</span> input:checked ~ .checkmark {</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>    background-color: <span class="cn">#00aa00</span><span class="op">;</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>    <span class="kw">border-color</span>: <span class="cn">#00aa00</span><span class="op">;</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* Create the checkmark/indicator (hidden when not checked) */</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">.checkmark</span><span class="in">:after</span> {</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>    <span class="kw">content</span>: <span class="st">&#39;&#39;</span><span class="op">;</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>    <span class="kw">position</span>: <span class="dv">absolute</span><span class="op">;</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>    <span class="kw">display</span>: <span class="dv">none</span><span class="op">;</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* Show the checkmark when checked */</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">.cb-container</span> input<span class="in">:checked</span> <span class="op">~</span> <span class="fu">.checkmark</span><span class="in">:after</span> {</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>    <span class="kw">display</span>: <span class="dv">block</span><span class="op">;</span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* Style the checkmark/indicator */</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">.cb-container</span> <span class="fu">.checkmark</span><span class="in">:after</span> {</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>    <span class="kw">left</span>: <span class="dv">6</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>    <span class="kw">top</span>: <span class="dv">0</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>    <span class="kw">width</span>: <span class="dv">7</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>    <span class="kw">height</span>: <span class="dv">17</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>    <span class="kw">border</span>: <span class="dv">solid</span> <span class="cn">white</span><span class="op">;</span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>    <span class="kw">border-width</span>: <span class="dv">0</span> <span class="dv">4</span><span class="dt">px</span> <span class="dv">4</span><span class="dt">px</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>    <span class="kw">-webkit-transform</span>: <span class="fu">rotate(</span><span class="dv">45</span><span class="dt">deg</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>    <span class="kw">-ms-transform</span>: <span class="fu">rotate(</span><span class="dv">45</span><span class="dt">deg</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>    <span class="kw">transform</span>: <span class="fu">rotate(</span><span class="dv">45</span><span class="dt">deg</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">.cb-container.disabled</span> {</span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>    <span class="kw">cursor</span>: not-allowed<span class="op">;</span></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>    <span class="kw">pointer-events</span>: <span class="dv">none</span><span class="op">;</span></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>    <span class="kw">opacity</span>: <span class="dv">0.5</span><span class="op">;</span></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="my-checkbox.component.css">my-checkbox.component.css</h3>
<h2 id="the-component">The Component</h2>
<p>With the checkbox styled the way I wanted it, my next thought was
that I should bundle it as an Angular component so that I could reuse it
on other pages. Then I realized that the UX design required that the
checkbox label should always be on the right, the same size, and the
same distance from the box. At that point, it really sounds more and
more like a custom component. And since I am now thinking of a custom
component, I should see about making it work with [(ngModel)].</p>
<p>Here is how I envisioned the custom checkbox component would be
used.</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;app-checkbox</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ot">  text=</span><span class="st">&quot;Remember Me&quot;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="ot">  [disabled]=</span><span class="st">&quot;!isLoggedIn&quot;</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="ot">  [</span><span class="er">(ngModel)]</span><span class="ot">=</span><span class="st">&quot;remember&quot;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="kw">&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/app-checkbox&gt;</span></span></code></pre></div>
<p>This means I needed a way to pass in a string to be used for the
label, a boolean to set the disabled property, and 2-way binding for the
value of the checkbox itself. The first two were pretty easy. The third
required some custom Angular code.</p>
<h3 id="create-the-component">Create the component</h3>
<p>The first order of business is to create the component, with the help
of the Angular CLI.</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ng</span> generate component MyCheckbox <span class="at">--standalone</span> <span class="at">--skip-tests</span><span class="op">=</span>true</span></code></pre></div>
<pre><code>CREATE src/app/my-checkbox/my-checkbox.component.css (0 bytes)
CREATE src/app/my-checkbox/my-checkbox.component.html (26 bytes)
CREATE src/app/my-checkbox/my-checkbox.component.ts (316 bytes)</code></pre>
<p>The component has no business logic to speak of, so I skipped tests.
I may regret that later, but it will do for now. This command created
the three files listed above. As I have been doing with all components
since Angular 15.2, I created it as “standalone,” without an NgModule.
Any other pages or components that want to include MyCheckboxComponent
need to import it directly, as you’ll see shortly.</p>
<h3 id="add-the-html-template">Add the HTML Template</h3>
<p>Next, I needed to add the modest HTML to the newly-created component.
Here is the HTML:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;label</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="ot">  class=</span><span class="st">&quot;cb-container&quot;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="ot">  [class.disabled]=</span><span class="st">&quot;disabled&quot;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="kw">&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  {{ text }}</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;input</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="ot">    type=</span><span class="st">&quot;checkbox&quot;</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="ot">    [checked]=</span><span class="st">&quot;isChecked&quot;</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="ot">    (change)=</span><span class="st">&quot;onChanged($event)&quot;</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="ot">    (blur)=</span><span class="st">&quot;onBlur($event)&quot;</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="ot">    [disabled]=</span><span class="st">&quot;disabled&quot;</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="kw">/&gt;</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;span</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;checkmark&quot;</span><span class="kw">&gt;&lt;/span&gt;</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/label&gt;</span></span></code></pre></div>
<p>The <code>&lt;label&gt;</code> element serves as the container for
the checkbox. The fact that it wraps the input means that someone can
click on the label to check and uncheck the checkbox. Inside the label,
there is a placeholder for text that will be replaced with a value from
the component. The <code>&lt;input&gt;</code> element with the type
“checkbox” represents the checkbox itself. It has some important
attributes:</p>
<ul>
<li>The checked attribute determines whether the checkbox is checked,
based on a value from the component.</li>
<li>The change event handler triggers a method in the component when the
checkbox value changes. We’ll hook into this soon.</li>
<li>The blur event triggers a method in the Angular component when the
checkbox loses focus. As you’ll see this will be important soon.</li>
<li>The disabled attribute does what you’d expect: disables the checkbox
based on a value from the component. Unsurprisingly, if set to a
“truthy” value, this will cause the checkbox to be disabled. The
<code>&lt;span&gt;</code> element with the class “checkmark” represents
the visual indicator for the checkbox.</li>
</ul>
<h2 id="component-fields">Component Fields</h2>
<p>With the HTML template complete, the next step is to create the
fields and functions referred to. I added the two fields at the top of
the component’s class, and the event handler after the constructor.</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>@<span class="fu">Input</span>() text <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>@<span class="fu">Input</span>() disabled <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span></code></pre></div>
<p>Both fields are annotated with Angular’s <span class="citation"
data-cites="Input">@Input</span> decorator, which is what enables their
values to be specified from the parent component, using standard HTML
syntax.</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">onChanged</span>($event<span class="op">:</span> <span class="bu">Event</span>) {</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> isChecked <span class="op">=</span> ($event<span class="op">.</span><span class="at">target</span> <span class="im">as</span> <span class="bu">HTMLInputElement</span>)<span class="op">?.</span><span class="at">checked</span><span class="op">;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">this</span><span class="op">.</span><span class="at">isChecked</span> <span class="op">=</span> isChecked<span class="op">;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>The onChanged function is called whenever the
<code>&lt;input&gt;</code> changes (in other words, the checkbox is
checked or cleared). The <code>$event</code> parameter is a standard
HTML DOM Event object. It is in this function where I manually set the
isChecked field to either true or false, based on the actual state of
the checkbox. I am being overly paranoid by casting the event target to
an HTMLInputElement and ensuring that it is “truthy” before retrieving
the checked attribute. It may be paranoid, but it works.</p>
<h3 id="no-value-accessor">No Value Accessor</h3>
<p>At this point, there is a custom checkbox that can be dropped inside
any other component.</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;app-my-checkbox</span> <span class="er">text</span><span class="ot">=</span><span class="st">&quot;Remember me&quot;</span> <span class="er">disabled</span><span class="ot">=</span><span class="st">&quot;false&quot;</span> <span class="kw">/&gt;</span></span></code></pre></div>
<p>It will work, except for two things:</p>
<ol type="1">
<li>The host container will not be able to get the state of the checkbox
at runtime.</li>
<li>The [(ngModel)] attribute cannot be used. If it is, you will get a
nasty error at runtime that there is “No Value Accessor” on the
component.</li>
</ol>
<p>Fortunately, these two problems share a common solution. The custom
component needs to implement Angular’s ControlValueAccessor
interface.</p>
<h2 id="controlvalueaccessor">ControlValueAccessor</h2>
<p>If you look up this interface, you will find that it consists of four
functions, each of which will need to be implemented on the component.
We will look at those functions one by one.</p>
<h3 id="writevalue">writeValue()</h3>
<p>This function is called by Angular whenever a value change is being
made from the hosting component. All you need to do is handle the value
being passed in. Here, I am simply storing it, which incidentally
changes the checkbox state, due to its internal data binding.</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">writeValue</span>(obj<span class="op">:</span> <span class="dt">boolean</span>)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">this</span><span class="op">.</span><span class="at">isChecked</span> <span class="op">=</span> obj<span class="op">;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="registeronchange">registerOnChange()</h3>
<p>This function is called by Angular to provide a callback function
that the component needs to call whenever a change has occurred.</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>onChange <span class="op">=</span> (_) <span class="kw">=&gt;</span> {}<span class="op">;</span> <span class="co">// No-op</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">registerOnChange</span>(fn<span class="op">:</span> <span class="dt">any</span>)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Replace internal function with the one provided</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">this</span><span class="op">.</span><span class="at">onChange</span> <span class="op">=</span> fn<span class="op">;</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>The pattern I am following here is to create a default onChange
function on the component, which does absolutely nothing. Then when
Angular calls registerOnChange, the component’s onChange function is
replaced with the callback function provided.</p>
<p>However, that is only half of the story. The custom component needs
to call it, which happens in the onChanged function that is bound to the
checkbox. For this, the component simply calls the internal onChange
function, which should be the callback registered by Angular. If no
callback has been registered, the default no-op function is called. This
prevents the need for an “is null guard.”</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">onChanged</span>($event<span class="op">:</span> <span class="bu">Event</span>) {</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> isChecked <span class="op">=</span> ($event<span class="op">.</span><span class="at">target</span> <span class="im">as</span> <span class="bu">HTMLInputElement</span>)<span class="op">?.</span><span class="at">checked</span><span class="op">;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">this</span><span class="op">.</span><span class="at">isChecked</span> <span class="op">=</span> isChecked<span class="op">;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">this</span><span class="op">.</span><span class="fu">onChange</span>(isChecked)<span class="op">;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="registerontouched">registerOnTouched()</h3>
<p>This one is a little more obscure, and it doesn’t seem to be
necessary for a checkbox control. According to the official
documentation:</p>
<p>“When implementing registerOnTouched in your own value accessor, save
the given function so your class calls it when the control should be
considered blurred or ‘touched’.”</p>
<p>This should not be confused with a mobile device’s concept of
“touched.” Instead, it refers to a form having been touched or modified.
In this custom component, I have wired up the checkbox’s blur event. The
pattern is the same as with registerOnChange().</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>onBlur <span class="op">=</span> (_) <span class="kw">=&gt;</span> {}<span class="op">;</span> <span class="co">// No-op</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">registerOnTouched</span>(fn<span class="op">:</span> <span class="dt">any</span>)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Call the parent&#39;s registered onTouched function, if any.</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">// This lets it know that the checkbox lost focus.</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">this</span><span class="op">.</span><span class="at">onBlur</span> <span class="op">=</span> fn<span class="op">;</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="setdisabledstate">setDisabledState()</h3>
<p>This function does what you might think: It is called by the forms
API when the custom component should be disabled. In this case, I am
setting an internal isDisabled field to whatever boolean value is
provided. This value is then reflected on the component through data
binding, and the checkbox is enabled or disabled appropriately.</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>setDisabledState<span class="op">?</span>(isDisabled<span class="op">:</span> <span class="dt">boolean</span>)<span class="op">:</span> <span class="kw">void</span> {</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">this</span><span class="op">.</span><span class="at">disabled</span> <span class="op">=</span> isDisabled<span class="op">;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>In the case of a checkbox, it is all pretty straightforward. You
could also imagine a more complex control, which might consist of
multiple input elements that can each be disabled. Angular Forms sees
the custom component as a single control. When it disables that control,
individual internal elements might need to be disabled according to
different rules. Exactly how you handle that in your own controls is up
to you.</p>
<p>I added a little CSS to set the opacity to 50% when disabled.</p>
<h3 id="registering-the-provider">Registering the Provider</h3>
<p>There is one last piece to getting everything to work happily
together. The code inside the custom component is complete, but Angular
still knows nothing about it. The solution has changed since Angular was
released, and I found multiple solutions that no longer work. This
example was tested on Angular 8 through 16.</p>
<p>The final step to register the custom component is to have the
component provide the NG_VALUE_ACCESSOR inside the providers array
inside its <span class="citation"
data-cites="Component">@Component</span> decorator, as shown here:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>providers<span class="op">:</span> [</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    provide<span class="op">:</span> NG_VALUE_ACCESSOR<span class="op">,</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    useExisting<span class="op">:</span> <span class="fu">forwardRef</span>(() <span class="kw">=&gt;</span> MyCheckboxComponent)<span class="op">,</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    multi<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>]<span class="op">;</span></span></code></pre></div>
<p>This code indicates to Angular that the component provides its own
NG_VALUE_ACCESSOR, using an existing component. The catch-22 here is
that the component has not yet been defined. Angular allows this through
the use of the forwardRef function. Basically, it tells the dependency
injection system that the component provided is yet to be defined but
will be available at runtime. The parameter to the forwardRef function
is an arrow function that returns the custom component’s class.</p>
<p>The last property, <code>multi: true</code>, indicates that there may
be more than one NG_VALUE_ACCESSORs being provided to the application,
potentially from multiple places. It is enough to remember to set it to
true.</p>
<h2 id="wrapping-up">Wrapping up</h2>
<p>At this point, the custom checkbox component is ready to be dropped
onto any other page or component in the application. Because it was
defined in a custom module, any other component wanting to use it would
need to import that module into its own module (or the app’s
module).</p>
<p>As shown above, here is a complete example of using this custom
component inside of another component.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;app-my-checkbox</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="ot">  [</span><span class="er">(ngModel)]</span><span class="ot">=</span><span class="st">&quot;isChecked&quot;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="ot">  [text]=</span><span class="st">&quot;text&quot;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="ot">  [disabled]=</span><span class="st">&quot;isDisabled&quot;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="kw">/&gt;</span></span></code></pre></div>
<p>As you can see, it took a little bit of effort, but the result is
that [(ngModel)] now simply “just works,” which was the goal. Finally,
because the component is recognized by Angular as a form control, it can
be added to a Reactive Form, complete with custom validation rules,
should you so desire.</p>
<h2 id="the-complete-component">The Complete Component</h2>
<p>As a convenience, here is the complete component:</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> {</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  Component<span class="op">,</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  Input<span class="op">,</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  forwardRef<span class="op">,</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>} <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> {</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  ControlValueAccessor<span class="op">,</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  NG_VALUE_ACCESSOR<span class="op">,</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>} <span class="im">from</span> <span class="st">&#39;@angular/forms&#39;</span><span class="op">;</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>@<span class="fu">Component</span>({</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  selector<span class="op">:</span> <span class="st">&#39;app-my-checkbox&#39;</span><span class="op">,</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  templateUrl<span class="op">:</span> <span class="st">&#39;./my-checkbox.component.html&#39;</span><span class="op">,</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  styleUrls<span class="op">:</span> [<span class="st">&#39;./my-checkbox.component.css&#39;</span>]<span class="op">,</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  standalone<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  providers<span class="op">:</span> [</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>      provide<span class="op">:</span> NG_VALUE_ACCESSOR<span class="op">,</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>      useExisting<span class="op">:</span> <span class="fu">forwardRef</span>(</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>        () <span class="kw">=&gt;</span> MyCheckboxComponent<span class="op">,</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>      )<span class="op">,</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>      multi<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> MyCheckboxComponent</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>  <span class="kw">implements</span> ControlValueAccessor</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Bindable properties</span></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>  @<span class="fu">Input</span>() text <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>  @<span class="fu">Input</span>() disabled <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Internal properties</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>  isChecked <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>  onChange <span class="op">=</span> (_<span class="op">:</span> <span class="dt">unknown</span>) <span class="kw">=&gt;</span> {}<span class="op">;</span></span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>  onBlur <span class="op">=</span> (_<span class="op">:</span> <span class="dt">unknown</span>) <span class="kw">=&gt;</span> {}<span class="op">;</span></span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">writeValue</span>(obj<span class="op">:</span> <span class="dt">boolean</span>)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">isChecked</span> <span class="op">=</span> obj<span class="op">;</span></span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">registerOnChange</span>(fn<span class="op">:</span> <span class="dt">any</span>)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">onChange</span> <span class="op">=</span> fn<span class="op">;</span></span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-47"><a href="#cb16-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">registerOnTouched</span>(fn<span class="op">:</span> <span class="dt">any</span>)<span class="op">:</span> <span class="dt">void</span> {</span>
<span id="cb16-48"><a href="#cb16-48" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">onBlur</span> <span class="op">=</span> fn<span class="op">;</span></span>
<span id="cb16-49"><a href="#cb16-49" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-50"><a href="#cb16-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-51"><a href="#cb16-51" aria-hidden="true" tabindex="-1"></a>  setDisabledState<span class="op">?</span>(isDisabled<span class="op">:</span> <span class="dt">boolean</span>)<span class="op">:</span> <span class="kw">void</span> {</span>
<span id="cb16-52"><a href="#cb16-52" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">disabled</span> <span class="op">=</span> isDisabled<span class="op">;</span></span>
<span id="cb16-53"><a href="#cb16-53" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-54"><a href="#cb16-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-55"><a href="#cb16-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">onChanged</span>($event<span class="op">:</span> <span class="bu">Event</span>) {</span>
<span id="cb16-56"><a href="#cb16-56" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> isChecked <span class="op">=</span> (</span>
<span id="cb16-57"><a href="#cb16-57" aria-hidden="true" tabindex="-1"></a>      $event<span class="op">.</span><span class="at">target</span> <span class="im">as</span> <span class="bu">HTMLInputElement</span></span>
<span id="cb16-58"><a href="#cb16-58" aria-hidden="true" tabindex="-1"></a>    )<span class="op">?.</span><span class="at">checked</span><span class="op">;</span></span>
<span id="cb16-59"><a href="#cb16-59" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">isChecked</span> <span class="op">=</span> isChecked<span class="op">;</span></span>
<span id="cb16-60"><a href="#cb16-60" aria-hidden="true" tabindex="-1"></a>    <span class="kw">this</span><span class="op">.</span><span class="fu">onChange</span>(isChecked)<span class="op">;</span></span>
<span id="cb16-61"><a href="#cb16-61" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-62"><a href="#cb16-62" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Filename: <code>my-checkbox.component.ts</code></p>
<h3 id="and-the-template">And the template:</h3>
<div class="sourceCode" id="cb17"><pre
class="sourceCode html"><code class="sourceCode html"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;label</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="ot">  class=</span><span class="st">&quot;cb-container&quot;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="ot">  [class.disabled]=</span><span class="st">&quot;disabled&quot;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="kw">&gt;</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  {{ text }}</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;input</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="ot">    type=</span><span class="st">&quot;checkbox&quot;</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="ot">    [checked]=</span><span class="st">&quot;isChecked&quot;</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="ot">    (change)=</span><span class="st">&quot;onChanged($event)&quot;</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="ot">    (blur)=</span><span class="st">&quot;onBlur($event)&quot;</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="ot">    [disabled]=</span><span class="st">&quot;disabled&quot;</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="kw">/&gt;</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">&lt;span</span> <span class="er">class</span><span class="ot">=</span><span class="st">&quot;checkmark&quot;</span><span class="kw">&gt;&lt;/span&gt;</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/label&gt;</span></span></code></pre></div>
<p>Filename: <code>my-checkbox.component.html</code></p>
<p>You saw the CSS at the beginning of the chapter, so I won’t reproduce
it here.</p>
<h2 id="summary">Summary</h2>
<p>In this chapter, we took a journey through the creation and
customization of a checkbox in an Angular app, turning an ordinary HTML
and CSS example into a reusable Angular component.</p>
<p>As we move forward, keep in mind the principles we’ve learned here -
reusable components can significantly enhance both the developer
experience and the user interface.</p>
<p>Looking ahead, I encourage you to experiment with adding this custom
checkbox component to a Template or Reactive Form. Happy coding!</p>
<h2 id="for-more-information">For More Information</h2>
<ul>
<li>Angular Docs for the ControlValueAccessor: <a
href="https://angular.io/api/forms/ControlValueAccessor">Angular
Docs</a> - https://angular.io/api/forms/ControlValueAccessor</li>
<li>W3School Custom Checkbox: <a
href="https://www.w3schools.com/howto/howto_css_custom_checkbox.asp">W3Schools
Tutorial</a> -
https://www.w3schools.com/howto/howto_css_custom_checkbox.asp</li>
<li>HTML DOM Event object: <a
href="https://www.w3schools.com/jsref/dom_obj_event.asp">HTML DOM
Event</a> - https://www.w3schools.com/jsref/dom_obj_event.asp</li>
</ul>
</body>
</html>
